(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{RN7a:function(t,o,c){"use strict";c.r(o),c.d(o,"CategoriesModule",function(){return W});var a=c("ofXK"),e=c("tyNb"),n=c("+0xr"),i=c("XNiG"),r=c("0IaG"),s=c("fXoL"),l=c("cmiX"),d=c("5COb"),m=c("dNgK"),u=c("bTqV"),b=c("NFeN"),g=c("3Pt+"),h=c("kmnG"),p=c("qFsG");function f(t,o){if(1&t&&(s.bc(0,"mat-error"),s.Rc(1),s.ac()),2&t){const t=s.nc();s.Jb(1),s.Tc(" ",t.categoryForm.getErrorMessage("name")," ")}}function v(t,o){if(1&t&&(s.bc(0,"mat-error"),s.Rc(1),s.ac()),2&t){const t=s.nc();s.Jb(1),s.Tc(" ",t.categoryForm.getErrorMessage("description")," ")}}var y=function(t){return t.EDIT="edit",t.NEW="new",t}({});let w=(()=>{class t{constructor(t,o,c,a,e){this.data=t,this.categoryForm=o,this.categorySvc=c,this._snackBar=a,this.dialogRef=e,this.actionTODO=y.NEW}ngOnInit(){var t,o,c;(null===(t=this.data)||void 0===t?void 0:t.category.hasOwnProperty("id"))?(this.actionTODO=y.EDIT,this.data.title=`Editar Categoria "${null===(c=null===(o=this.data)||void 0===o?void 0:o.category)||void 0===c?void 0:c.name}"`,this.pathFormData()):this.categoryForm.baseForm.reset()}onSave(){var t,o;const c=this.categoryForm.baseForm.value;if(this.actionTODO==y.NEW)this.categorySvc.new(c).subscribe(t=>{this.dialogRef.close(t),this._snackBar.open("Departamento agregado correctamente","Aceptar",{duration:2e3})});else{const a=null===(o=null===(t=this.data)||void 0===t?void 0:t.category)||void 0===o?void 0:o.id;this.categorySvc.update(a,c).subscribe(t=>{this.dialogRef.close(t),this._snackBar.open("Departamento agregado correctamente","Aceptar",{duration:2e3})})}}checkField(t){return this.categoryForm.isValidField(t)}pathFormData(){var t,o,c,a;this.categoryForm.baseForm.patchValue({name:null===(o=null===(t=this.data)||void 0===t?void 0:t.category)||void 0===o?void 0:o.name,description:null===(a=null===(c=this.data)||void 0===c?void 0:c.category)||void 0===a?void 0:a.description})}}return t.\u0275fac=function(o){return new(o||t)(s.Vb(r.a),s.Vb(l.a),s.Vb(d.a),s.Vb(m.a),s.Vb(r.g))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-category-modal"]],decls:17,vars:6,consts:[["mat-icon-button","",1,"close-button",3,"mat-dialog-close"],["color","warn",1,"close-icon"],["mat-dialog-title",""],[1,"modal-form"],[3,"formGroup"],[1,"full-width-input"],["formControlName","name","matInput","","placeholder","Name","required",""],[4,"ngIf"],["formControlName","description","matInput","","placeholder","Description","required",""],["align","end"],["mat-raised-button","","color","primary","ckdFocusInitial","",3,"mat-dialog-close","click"]],template:function(t,o){1&t&&(s.bc(0,"button",0),s.bc(1,"mat-icon",1),s.Rc(2,"close"),s.ac(),s.ac(),s.bc(3,"h2",2),s.Rc(4),s.ac(),s.bc(5,"mat-dialog-content"),s.bc(6,"div",3),s.bc(7,"form",4),s.bc(8,"mat-form-field",5),s.Wb(9,"input",6),s.Pc(10,f,2,1,"mat-error",7),s.ac(),s.bc(11,"mat-form-field",5),s.Wb(12,"input",8),s.Pc(13,v,2,1,"mat-error",7),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(14,"mat-dialog-actions",9),s.bc(15,"button",10),s.jc("click",function(){return o.onSave()}),s.Rc(16,"Guardar "),s.ac(),s.ac()),2&t&&(s.vc("mat-dialog-close",!0),s.Jb(4),s.Tc(" ",null==o.data?null:o.data.title,""),s.Jb(3),s.vc("formGroup",o.categoryForm.baseForm),s.Jb(3),s.vc("ngIf",o.checkField("name")),s.Jb(3),s.vc("ngIf",o.checkField("description")),s.Jb(2),s.vc("mat-dialog-close",!0))},directives:[u.b,r.d,b.a,r.h,r.e,g.v,g.l,g.e,h.c,g.b,p.b,g.k,g.d,g.r,a.m,r.c,h.b],styles:[".modal-form[_ngcontent-%COMP%]{padding:1rem 0}.modal-form[_ngcontent-%COMP%]   .full-width-input[_ngcontent-%COMP%]{width:100%}.close-button[_ngcontent-%COMP%]{float:right;top:-24px;right:-24px}.close-icon[_ngcontent-%COMP%]{transition:1s ease-in-out}.close-icon[_ngcontent-%COMP%]:hover{transform:rotate(180deg)}  .icon-outside .close-button{float:right;top:-52px;right:-52px}  .icon-outside .mat-dialog-container{overflow:unset}"]}),t})();var C=c("1G5W"),O=c("PSD3"),D=c.n(O),P=c("M9IT"),R=c("JqCM"),k=c("Dh3D");function F(t,o){1&t&&(s.bc(0,"th",12),s.Rc(1," Id "),s.ac())}function S(t,o){if(1&t&&(s.bc(0,"td",13),s.Rc(1),s.ac()),2&t){const t=o.$implicit;s.Jb(1),s.Tc(" ",t.id," ")}}function M(t,o){1&t&&(s.bc(0,"th",12),s.Rc(1," Nombre "),s.ac())}function I(t,o){if(1&t&&(s.bc(0,"td",13),s.Rc(1),s.ac()),2&t){const t=o.$implicit;s.Jb(1),s.Tc(" ",t.name," ")}}function J(t,o){1&t&&(s.bc(0,"th",12),s.Rc(1," Descripci\xf3n "),s.ac())}function N(t,o){if(1&t&&(s.bc(0,"td",13),s.Rc(1),s.ac()),2&t){const t=o.$implicit;s.Jb(1),s.Tc(" ",t.description," ")}}function T(t,o){1&t&&(s.bc(0,"th",12),s.Rc(1," Acciones "),s.ac())}function _(t,o){if(1&t){const t=s.cc();s.bc(0,"td",13),s.bc(1,"div",0),s.bc(2,"button",14),s.jc("click",function(){s.Gc(t);const c=o.$implicit;return s.nc().onOpenModal(c)}),s.Rc(3,"Editar"),s.ac(),s.bc(4,"button",15),s.jc("click",function(){s.Gc(t);const c=o.$implicit;return s.nc().onDelete(c.id)}),s.Rc(5,"Eliminar"),s.ac(),s.ac(),s.ac()}}function x(t,o){1&t&&s.Wb(0,"tr",16)}function B(t,o){1&t&&s.Wb(0,"tr",17)}const E=function(){return[5,10,15,20]},V=[{path:"",component:(()=>{class t{constructor(t,o,c,a){this.categorySvc=t,this.dialog=o,this._snackBar=c,this.spinner=a,this.displayedColumns=["Id","Name","Description","Actions"],this.dataSource=new n.k,this.destroy$=new i.a}ngOnInit(){this.spinner.show(),this.categorySvc.getAll().subscribe(t=>{this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.spinner.hide()})}onDelete(t){D.a.fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1 revertir la accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"S\xed, borrar."}).then(o=>{o.isConfirmed&&(this.categorySvc.delete(t).pipe(Object(C.a)(this.destroy$)).subscribe(t=>{this.ngOnInit()}),D.a.fire("\xa1Eliminado!","La categoria ha sido eliminado correctamente.","success"),this.ngOnInit())})}onOpenModal(t={}){this.dialog.open(w,{height:"300px",width:"600px",hasBackdrop:!1,data:{title:"Nueva Categoria",category:t}}).afterClosed().pipe().subscribe(()=>{this.ngOnInit()})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}}return t.\u0275fac=function(o){return new(o||t)(s.Vb(d.a),s.Vb(r.b),s.Vb(m.a),s.Vb(R.c))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-categories"]],viewQuery:function(t,o){if(1&t&&s.Lc(P.a,!0),2&t){let t;s.Bc(t=s.kc())&&(o.paginator=t.first)}},decls:21,vars:5,consts:[[1,"table-button-row"],["mat-flat-button","","color","primary",1,"button-new",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","Description"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","id","paginator-categories",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(s.bc(0,"div",0),s.bc(1,"button",1),s.jc("click",function(){return o.onOpenModal()}),s.bc(2,"mat-icon"),s.Rc(3,"category"),s.ac(),s.Rc(4," Agregar nuevo "),s.ac(),s.ac(),s.bc(5,"table",2),s.Zb(6,3),s.Pc(7,F,2,0,"th",4),s.Pc(8,S,2,1,"td",5),s.Yb(),s.Zb(9,6),s.Pc(10,M,2,0,"th",4),s.Pc(11,I,2,1,"td",5),s.Yb(),s.Zb(12,7),s.Pc(13,J,2,0,"th",4),s.Pc(14,N,2,1,"td",5),s.Yb(),s.Zb(15,8),s.Pc(16,T,2,0,"th",4),s.Pc(17,_,6,0,"td",5),s.Yb(),s.Pc(18,x,1,0,"tr",9),s.Pc(19,B,1,0,"tr",10),s.ac(),s.Wb(20,"mat-paginator",11)),2&t&&(s.Jb(5),s.vc("dataSource",o.dataSource),s.Jb(13),s.vc("matHeaderRowDef",o.displayedColumns),s.Jb(1),s.vc("matRowDefColumns",o.displayedColumns),s.Jb(1),s.vc("pageSizeOptions",s.yc(4,E)))},directives:[u.b,b.a,n.j,k.a,n.c,n.e,n.b,n.g,n.i,P.a,n.d,k.b,n.a,n.f,n.h],styles:["table[_ngcontent-%COMP%]{width:80%;margin:1rem auto 0}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.table-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:12px}.button-new[_ngcontent-%COMP%]{margin:0 auto;width:20%}#paginator-categories[_ngcontent-%COMP%]{width:80%;margin-left:10%}"]}),t})()}];let G=(()=>{class t{}return t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({factory:function(o){return new(o||t)},imports:[[e.e.forChild(V)],e.e]}),t})();var $=c("vvyD");let W=(()=>{class t{}return t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({factory:function(o){return new(o||t)},imports:[[a.c,G,$.a]]}),t})()}}]);