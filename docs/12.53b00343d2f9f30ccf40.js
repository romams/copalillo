(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{oMLn:function(t,e,o){"use strict";o.r(e),o.d(e,"DeptoModule",function(){return $});var n=o("ofXK"),i=o("tyNb"),c=o("+0xr"),a=o("XNiG"),r=o("1G5W"),l=o("0IaG"),s=o("fXoL"),d=o("cmiX"),u=o("3Pt+"),m=o("/9La");let p=(()=>{class t extends m.a{constructor(t){super(t),this.fb=t,this.baseForm=this.fb.group({name:["",[u.t.required]],description:["",[u.t.required]],image:["",[u.t.required]]})}isValidField(t){super.isValidField(t)}getErrorMessage(t){super.getErrorMessage(t)}}return t.\u0275fac=function(e){return new(e||t)(s.fc(u.c))},t.\u0275prov=s.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=o("U4M0"),f=o("dNgK"),h=o("bTqV"),g=o("NFeN");function v(t,e){1&t&&(s.bc(0,"label",18),s.Rc(1,"Elige una imagen"),s.ac())}function w(t,e){if(1&t&&(s.bc(0,"label",19),s.Rc(1),s.ac()),2&t){const t=s.nc();s.Jb(1),s.Tc(" ",t.imgName," ")}}var C=function(t){return t.EDIT="edit",t.NEW="new",t}({});let D=(()=>{class t{constructor(t,e,o,n,i,c){this.data=t,this.categoryForm=e,this.deptoForm=o,this.deptoSvc=n,this._snackBar=i,this.dialogRef=c,this.actionTODO=C.NEW}ngOnInit(){var t,e,o,n,i;(null===(t=this.data)||void 0===t?void 0:t.depto.hasOwnProperty("id"))?(this.actionTODO=C.EDIT,this.data.title=`Editar Departamento "${null===(o=null===(e=this.data)||void 0===e?void 0:e.depto)||void 0===o?void 0:o.name}"`,this.image=null===(i=null===(n=this.data)||void 0===n?void 0:n.depto)||void 0===i?void 0:i.image,this.pathFormData()):this.deptoForm.baseForm.reset()}onFileChange(t){if(t.target.files&&t.target.files.length>0){const e=t.target.files[0];if(e.type.includes("image")){const t=new FileReader;t.readAsDataURL(e),this.file=e,t.onload=e=>this.image=t.result,this.imgName=e.name}}}onSave(){var t,e;const o=this.deptoForm.baseForm.value;if(this.actionTODO==C.NEW)this.deptoSvc.new(o,this.file).subscribe(t=>{this.dialogRef.close(t),this._snackBar.open("Departamento agregado correctamente","Aceptar",{duration:2e3})});else{const n=null===(e=null===(t=this.data)||void 0===t?void 0:t.depto)||void 0===e?void 0:e.id;this.deptoSvc.update(n,o,this.file).subscribe(t=>{this.dialogRef.close(t),this._snackBar.open("Departamento actualizado correctamente","Aceptar",{duration:2e3})})}}checkField(t){return this.deptoForm.isValidField(t)}pathFormData(){var t,e,o,n;this.deptoForm.baseForm.patchValue({name:null===(e=null===(t=this.data)||void 0===t?void 0:t.depto)||void 0===e?void 0:e.name,description:null===(n=null===(o=this.data)||void 0===o?void 0:o.depto)||void 0===n?void 0:n.description})}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(l.a),s.Vb(d.a),s.Vb(p),s.Vb(b.a),s.Vb(f.a),s.Vb(l.g))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-depto-modal"]],decls:30,vars:7,consts:[["mat-icon-button","",1,"close-button",3,"mat-dialog-close"],["color","warn",1,"close-icon"],["mat-dialog-title",""],[1,"container"],[1,"row"],[1,"col-md-4"],["width","100%",3,"src"],["type","file","name","file","id","file",1,"inputfile",3,"change"],["for","file","id","filename",4,"ngIf","ngIfElse"],["mat-raised-button","","color","primary","ckdFocusInitial","","id","btn-save",3,"mat-dialog-close","click"],[1,"col-md-8"],[3,"formGroup"],["formControlName","image","type","file","id","file",1,"inputfile",3,"change"],[1,"form-group"],[1,"control-label"],["formControlName","name","placeholder","Name","required","",1,"form-control"],["formControlName","description","placeholder","Description","required","",1,"form-control"],["imagename",""],["for","file","id","filename"],["for","file"]],template:function(t,e){if(1&t&&(s.bc(0,"button",0),s.bc(1,"mat-icon",1),s.Rc(2,"close"),s.ac(),s.ac(),s.bc(3,"h2",2),s.Rc(4),s.ac(),s.bc(5,"div",3),s.bc(6,"div",4),s.bc(7,"div",5),s.bc(8,"h3"),s.Rc(9,"Logo del departamento."),s.ac(),s.Wb(10,"img",6),s.Wb(11,"br"),s.bc(12,"input",7),s.jc("change",function(t){return e.onFileChange(t)}),s.ac(),s.Pc(13,v,2,0,"label",8),s.Wb(14,"hr"),s.bc(15,"button",9),s.jc("click",function(){return e.onSave()}),s.Rc(16," Guardar "),s.ac(),s.ac(),s.bc(17,"div",10),s.bc(18,"form",11),s.bc(19,"input",12),s.jc("change",function(t){return e.onFileChange(t)}),s.ac(),s.bc(20,"div",13),s.bc(21,"label",14),s.Rc(22,"Nombre del departamento"),s.ac(),s.Wb(23,"input",15),s.ac(),s.bc(24,"div",13),s.bc(25,"label",14),s.Rc(26,"Decripci\xf3n"),s.ac(),s.Wb(27,"input",16),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Pc(28,w,2,1,"ng-template",null,17,s.Qc)),2&t){const t=s.Cc(29);s.vc("mat-dialog-close",!0),s.Jb(4),s.Tc(" ",null==e.data?null:e.data.title,""),s.Jb(6),s.vc("src",e.image,s.Ic),s.Jb(3),s.vc("ngIf",!e.imgName)("ngIfElse",t),s.Jb(2),s.vc("mat-dialog-close",!0),s.Jb(3),s.vc("formGroup",e.deptoForm.baseForm)}},directives:[h.b,l.d,g.a,l.h,n.m,u.v,u.l,u.e,u.b,u.k,u.d,u.r],styles:[".modal-form[_ngcontent-%COMP%]{padding:1rem 0}.modal-form[_ngcontent-%COMP%]   .full-width-input[_ngcontent-%COMP%]{width:100%}.inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff;background-color:#3f51b5;display:inline-block;transition:all .5s;cursor:pointer;padding:15px 40px!important;text-transform:uppercase;width:100%;text-align:center;margin-top:1rem}.close-button[_ngcontent-%COMP%]{float:right;top:-24px;right:-24px}.close-icon[_ngcontent-%COMP%]{transition:1s ease-in-out}.close-icon[_ngcontent-%COMP%]:hover{transform:rotate(180deg)}  .icon-outside .close-button{float:right;top:-52px;right:-52px}  .icon-outside .mat-dialog-container{overflow:unset}#btn-save[_ngcontent-%COMP%]{width:100%}"]}),t})();var O=o("PSD3"),P=o.n(O),y=o("M9IT"),R=o("JqCM"),M=o("Dh3D");function F(t,e){1&t&&(s.bc(0,"th",12),s.Rc(1," Id "),s.ac())}function k(t,e){if(1&t&&(s.bc(0,"td",13),s.Rc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Tc(" ",t.id," ")}}function x(t,e){1&t&&(s.bc(0,"th",12),s.Rc(1," Nombre "),s.ac())}function N(t,e){if(1&t&&(s.bc(0,"td",13),s.Rc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Tc(" ",t.name," ")}}function S(t,e){1&t&&(s.bc(0,"th",12),s.Rc(1," Descriptcion "),s.ac())}function I(t,e){if(1&t&&(s.bc(0,"td",13),s.Rc(1),s.ac()),2&t){const t=e.$implicit;s.Jb(1),s.Tc(" ",t.description," ")}}function _(t,e){1&t&&(s.bc(0,"th",12),s.Rc(1," Acciones "),s.ac())}function E(t,e){if(1&t){const t=s.cc();s.bc(0,"td",13),s.bc(1,"div",0),s.bc(2,"button",14),s.jc("click",function(){s.Gc(t);const o=e.$implicit;return s.nc().onOpenModal(o)}),s.Rc(3,"Editar"),s.ac(),s.bc(4,"button",15),s.jc("click",function(){s.Gc(t);const o=e.$implicit;return s.nc().onDelete(o.id)}),s.Rc(5,"Eliminar"),s.ac(),s.ac(),s.ac()}}function J(t,e){1&t&&s.Wb(0,"tr",16)}function T(t,e){1&t&&s.Wb(0,"tr",17)}const V=function(){return[5,10,15,20]},W=[{path:"",component:(()=>{class t{constructor(t,e,o){this.deptoSvc=t,this.dialog=e,this.spinner=o,this.displayedColumns=["Id","Nombre","Descripcion","Acciones"],this.dataSource=new c.k,this.destroy$=new a.a}ngOnInit(){this.spinner.show(),this.deptoSvc.getAll().subscribe(t=>{this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.spinner.hide()})}onDelete(t){P.a.fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1 revertir la accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"S\xed, borrar."}).then(e=>{e.isConfirmed&&(this.deptoSvc.delete(t).pipe(Object(r.a)(this.destroy$)).subscribe(t=>{this.ngOnInit()}),P.a.fire("\xa1Eliminado!","El departamento ha sido eliminado correctamente.","success"),this.ngOnInit())})}onOpenModal(t={}){this.dialog.open(D,{height:"400px",width:"800px",hasBackdrop:!1,data:{title:"Nueva Departamento",depto:t}}).afterClosed().pipe().subscribe(()=>{this.ngOnInit()})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(b.a),s.Vb(l.b),s.Vb(R.c))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-depto"]],viewQuery:function(t,e){if(1&t&&s.Lc(y.a,!0),2&t){let t;s.Bc(t=s.kc())&&(e.paginator=t.first)}},decls:21,vars:5,consts:[[1,"table-button-row"],["mat-flat-button","","color","primary",1,"button-new",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre"],["matColumnDef","Descripcion"],["matColumnDef","Acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","id","paginator-depto",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"button",1),s.jc("click",function(){return e.onOpenModal()}),s.bc(2,"mat-icon"),s.Rc(3,"category"),s.ac(),s.Rc(4," Agregar nuevo "),s.ac(),s.ac(),s.bc(5,"table",2),s.Zb(6,3),s.Pc(7,F,2,0,"th",4),s.Pc(8,k,2,1,"td",5),s.Yb(),s.Zb(9,6),s.Pc(10,x,2,0,"th",4),s.Pc(11,N,2,1,"td",5),s.Yb(),s.Zb(12,7),s.Pc(13,S,2,0,"th",4),s.Pc(14,I,2,1,"td",5),s.Yb(),s.Zb(15,8),s.Pc(16,_,2,0,"th",4),s.Pc(17,E,6,0,"td",5),s.Yb(),s.Pc(18,J,1,0,"tr",9),s.Pc(19,T,1,0,"tr",10),s.ac(),s.Wb(20,"mat-paginator",11)),2&t&&(s.Jb(5),s.vc("dataSource",e.dataSource),s.Jb(13),s.vc("matHeaderRowDef",e.displayedColumns),s.Jb(1),s.vc("matRowDefColumns",e.displayedColumns),s.Jb(1),s.vc("pageSizeOptions",s.yc(4,V)))},directives:[h.b,g.a,c.j,M.a,c.c,c.e,c.b,c.g,c.i,y.a,c.d,M.b,c.a,c.f,c.h],styles:["table[_ngcontent-%COMP%]{width:80%;margin:1rem auto 0}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.table-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:12px}.button-new[_ngcontent-%COMP%]{width:15%}#paginator-depto[_ngcontent-%COMP%]{width:80%;margin-left:10%}"]}),t})()}];let B=(()=>{class t{}return t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(W)],i.e]}),t})();var j=o("vvyD");let $=(()=>{class t{}return t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({factory:function(e){return new(e||t)},imports:[[n.c,B,j.a]]}),t})()}}]);